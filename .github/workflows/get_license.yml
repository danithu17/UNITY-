name: Get Unity License üîë

on: workflow_dispatch

jobs:
  activation:
    name: Generate .alf file
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Create ALF File
        run: |
          # ‡∑Ä‡∑ê‡∂© ‡∂ö‡∂ª‡∂± ‡∂≠‡∑ê‡∂± ‡∂Ω‡∂ö‡∑î‡∂´‡∑î ‡∂ö‡∂ª‡∂ú‡∂±‡∑ä‡∂±
          PROJECT_PATH=$(pwd)
          
          # Docker ‡∂ë‡∂ö ‡∂á‡∂≠‡∑î‡∑Ö‡∑ö ‡∂ö‡∑ô‡∂Ω‡∑í‡∂±‡∑ä‡∂∏ Project folder ‡∂ë‡∂ö‡∂ß .alf ‡∂ë‡∂ö ‡∑Ñ‡∂Ø‡∂±‡∑ä‡∂± ‡∂ö‡∑í‡∂∫‡∂±‡∑Ä‡∑è
          docker run --rm \
            -v "$PROJECT_PATH:/project" \
            unityci/editor:ubuntu-2022.3.0f1-base-3 \
            unity-editor \
              -batchmode \
              -nographics \
              -createManualActivationFile \
              -logfile /dev/stdout \
              -projectPath /project
          
          # ‡∑Ä‡∑ê‡∂©‡∑ö ‡∑Ñ‡∂ª‡∑í‡∂∫‡∂ß ‡∑Ä‡∑î‡∂´‡∑è‡∂Ø ‡∂∂‡∂Ω‡∂±‡∑ä‡∂± ‡∑É‡∑Ñ Permission ‡∑Ñ‡∂Ø‡∂±‡∑ä‡∂±
          sudo chmod -R 777 .
          ls -lh *.alf || echo "Still not found in root"

      - name: Upload ALF
        uses: actions/upload-artifact@v4
        with:
          name: Unity-Activation-File
          path: ./*.alf